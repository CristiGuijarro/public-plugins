<!DOCTYPE html>
<html>

<head>
    <title>Fraction of reads in peaks</title>
<link rel="stylesheet" type="text/css" href="https://www.ebi.ac.uk/~jcmarca/regulatory_build_stats/js/datatables.css"/>

<script src="https://www.ebi.ac.uk/~jcmarca/regulatory_build_stats/js/Chart.bundle.js"></script>
<script src="https://www.ebi.ac.uk/~jcmarca/regulatory_build_stats/js/utils.js"></script>

<script type="text/javascript" language="javascript" src="https://www.ebi.ac.uk/~jcmarca/regulatory_build_stats/js/jquery-1.12.4.js"></script>

<script type="text/javascript" src="https://www.ebi.ac.uk/~jcmarca/regulatory_build_stats/js/datatables.js"></script>

</head>

<body>

<h1>Fraction of reads in peaks</h1>

  <style>
    canvas{
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
    }
    .chart-container {
      width: 70%;
      margin-left: 40px;
      margin-right: 40px;
      margin-bottom: 40px;
    }
    .container {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: center;
    }
  </style>

  <h2>Distribution of fraction of reads in peaks (frip) values</h2>

  <h3>All frip values</h3>
  
  <div class="container-all"></div>
  
  <h3>Narrow peaks only</h3>
  
  <div class="container-narrow"></div>
  
  <h3>Broad peaks only</h3>
  
  <div class="container-broad"></div>
  
  <script>
    function createConfig(container_class, datasets) {
      var config = {
        type: 'line',
        data: {
          labels: [
            '0','0.02','0.04','0.06','0.08','0.1','0.12','0.14','0.16','0.18','0.2','0.22','0.24','0.26','0.28','0.3','0.32','0.34','0.36','0.38','0.4','0.42','0.44','0.46','0.48','0.5','0.52','0.54','0.56','0.58','0.6','0.62','0.64','0.66','0.68','0.7','0.72','0.74','0.76','0.78','0.8','0.82','0.84','0.86','0.88','0.9','0.92','0.94','0.96','0.98','1',
          ],
          datasets: datasets
        },
        options: {
          legend: {
              position: 'bottom'
          },
          responsive: true,
          title: {
            display: false,
            text: 'Fraction of reads in peaks'
          },
          scales: {
            xAxes: [{
              ticks: {
                min: 0,
                stepSize: 0.1
              },
              scaleLabel: {
                labelString: 'Frip',
                display: true,
              },
              gridLines: {
                display: true
              }
            }],
            yAxes: [{
              scaleLabel: {
                labelString: 'Number of peak callings in bin',
                display: true,
              },
              gridLines: {
                display: true
              },
              ticks: {
                min: 0,
                max: 250,
                stepSize: 50
              }
            }]
          }
        }
      };
      var container = document.querySelector(container_class);
      var div       = document.createElement('div');
      
      div.classList.add('chart-container');

      var canvas = document.createElement('canvas');
      div.appendChild(canvas);
      container.appendChild(div);

      var ctx = canvas.getContext('2d');

      new Chart(ctx, config);
      return
    }

  </script>

  <script>

    window.onload = function() {
    
      var datasets;
      
      datasets = [
        
        
        {
          label: 'All',
          backgroundColor: window.chartColors.gray,
          borderColor:     window.chartColors.gray,
          data: [
            '58','114','219','140','98','77','74','61','45','44','46','46','34','46','47','36','32','35','30','33','32','18','31','28','25','24','21','18','24','14','14','9','6','5','2','6','5','5','1','1','1','0','0','0','0','0','0','0','0','0','0',
          ],
          fill: false,
        }, 
        
        
        {
          label: 'Blueprint',
          backgroundColor: window.chartColors.red,
          borderColor:     window.chartColors.red,
          data: [
            '0','2','1','3','4','7','9','7','9','6','4','7','6','7','9','5','6','6','5','3','3','3','9','4','7','5','5','3','2','2','1','1','2','0','0','1','1','0','0','0','0','0','0','0','0','0','0','0','0','0','0',
          ],
          fill: false,
        }, 
        
        
        {
          label: 'ENCODE',
          backgroundColor: window.chartColors.blue,
          borderColor:     window.chartColors.blue,
          data: [
            '52','71','179','118','68','48','48','34','25','20','21','19','13','18','17','19','11','18','10','9','3','3','4','9','7','4','5','2','3','6','1','2','1','0','1','2','1','1','0','0','0','0','0','0','0','0','0','0','0','0','0',
          ],
          fill: false,
        }, 
        
        
        {
          label: 'Roadmap Epigenomics',
          backgroundColor: window.chartColors.green,
          borderColor:     window.chartColors.green,
          data: [
            '6','41','39','19','26','22','17','20','11','18','21','20','15','21','21','12','15','11','15','21','26','12','18','15','11','15','11','13','19','6','12','6','3','5','1','3','3','4','1','1','1','0','0','0','0','0','0','0','0','0','0',
          ],
          fill: false,
        }, 
        
      ];

      createConfig('.container-all',    datasets);

      datasets = [
        
        
        {
          label: 'All narrow peaks',
          backgroundColor: window.chartColors.gray,
          borderColor:     window.chartColors.gray,
          data: [
            '56','72','190','121','71','60','57','39','31','21','25','28','22','20','28','21','14','20','17','16','17','13','10','11','8','11','5','6','8','3','4','3','1','1','0','2','2','1','1','1','1','0','0','0','0','0','0','0','0','0','0',
          ],
          fill: false,
        }, 
        
        
        {
          label: 'Blueprint narrow peaks',
          backgroundColor: window.chartColors.red,
          borderColor:     window.chartColors.red,
          data: [
            '0','1','0','1','1','5','3','4','5','0','1','2','5','4','4','1','1','3','3','1','1','1','3','0','0','0','2','0','0','0','0','0','0','0','0','1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0',
          ],
          fill: false,
        }, 
        
        
        {
          label: 'ENCODE narrow peaks',
          backgroundColor: window.chartColors.blue,
          borderColor:     window.chartColors.blue,
          data: [
            '51','56','170','111','61','42','43','27','21','16','12','14','11','12','14','15','7','11','5','6','3','3','2','5','4','3','2','2','2','2','0','2','0','0','0','0','1','0','0','0','0','0','0','0','0','0','0','0','0','0','0',
          ],
          fill: false,
        }, 
        
        
        {
          label: 'Roadmap Epigenomics narrow peaks',
          backgroundColor: window.chartColors.green,
          borderColor:     window.chartColors.green,
          data: [
            '5','15','20','9','9','13','11','8','5','5','12','12','6','4','10','5','6','6','9','9','13','9','5','6','4','8','1','4','6','1','4','1','1','1','0','1','1','1','1','1','1','0','0','0','0','0','0','0','0','0','0',
          ],
          fill: false,
        }, 
        
      ];

      createConfig('.container-narrow', datasets);

      datasets = [
        
        
        {
          label: 'All broad peaks',
          backgroundColor: window.chartColors.gray,
          borderColor:     window.chartColors.gray,
          data: [
            '2','42','29','19','27','17','17','22','14','23','21','18','12','26','19','15','18','15','13','17','15','5','21','17','17','13','16','12','16','11','10','6','5','4','2','4','3','4','0','0','0','0','0','0','0','0','0','0','0','0','0',
          ],
          fill: false,
        }, 
        
        
        {
          label: 'Blueprint broad peaks',
          backgroundColor: window.chartColors.red,
          borderColor:     window.chartColors.red,
          data: [
            '0','1','1','2','3','2','6','3','4','6','3','5','1','3','5','4','5','3','2','2','2','2','6','4','7','5','3','3','2','2','1','1','2','0','0','0','1','0','0','0','0','0','0','0','0','0','0','0','0','0','0',
          ],
          fill: false,
        }, 
        
        
        {
          label: 'ENCODE broad peaks',
          backgroundColor: window.chartColors.blue,
          borderColor:     window.chartColors.blue,
          data: [
            '1','15','9','7','7','6','5','7','4','4','9','5','2','6','3','4','4','7','5','3','0','0','2','4','3','1','3','0','1','4','1','0','1','0','1','2','0','1','0','0','0','0','0','0','0','0','0','0','0','0','0',
          ],
          fill: false,
        }, 
        
        
        {
          label: 'Roadmap Epigenomics broad peaks',
          backgroundColor: window.chartColors.green,
          borderColor:     window.chartColors.green,
          data: [
            '1','26','19','10','17','9','6','12','6','13','9','8','9','17','11','7','9','5','6','12','13','3','13','9','7','7','10','9','13','5','8','5','2','4','1','2','2','3','0','0','0','0','0','0','0','0','0','0','0','0','0',
          ],
          fill: false,
        }, 
        
      ];

      createConfig('.container-broad', datasets);

    };
  </script>



</body>

</html>

